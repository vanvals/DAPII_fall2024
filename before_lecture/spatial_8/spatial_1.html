<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Peter Ganong and Maggie Shi">
<meta name="dcterms.date" content="2024-10-28">

<title>Spatial I</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="spatial_1_files/libs/clipboard/clipboard.min.js"></script>
<script src="spatial_1_files/libs/quarto-html/quarto.js"></script>
<script src="spatial_1_files/libs/quarto-html/popper.min.js"></script>
<script src="spatial_1_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="spatial_1_files/libs/quarto-html/anchor.min.js"></script>
<link href="spatial_1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="spatial_1_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="spatial_1_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="spatial_1_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="spatial_1_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction-5.2" id="toc-introduction-5.2" class="nav-link active" data-scroll-target="#introduction-5.2">Introduction (5.2)</a>
  <ul class="collapse">
  <li><a href="#intro-roadmap" id="toc-intro-roadmap" class="nav-link" data-scroll-target="#intro-roadmap">Intro: roadmap</a></li>
  <li><a href="#motivation" id="toc-motivation" class="nav-link" data-scroll-target="#motivation">Motivation</a></li>
  <li><a href="#textbook" id="toc-textbook" class="nav-link" data-scroll-target="#textbook">Textbook</a></li>
  <li><a href="#requirements.txt" id="toc-requirements.txt" class="nav-link" data-scroll-target="#requirements.txt"><code>requirements.txt</code></a></li>
  <li><a href="#vector-vs-raster-data" id="toc-vector-vs-raster-data" class="nav-link" data-scroll-target="#vector-vs-raster-data">Vector vs raster data</a></li>
  <li><a href="#examples-of-vector-data" id="toc-examples-of-vector-data" class="nav-link" data-scroll-target="#examples-of-vector-data">Examples of vector data</a></li>
  <li><a href="#building-blocks-of-vector-data" id="toc-building-blocks-of-vector-data" class="nav-link" data-scroll-target="#building-blocks-of-vector-data">Building blocks of vector data</a></li>
  <li><a href="#attribute-data" id="toc-attribute-data" class="nav-link" data-scroll-target="#attribute-data">Attribute data</a></li>
  <li><a href="#intro-summary" id="toc-intro-summary" class="nav-link" data-scroll-target="#intro-summary">Intro: summary</a></li>
  </ul></li>
  <li><a href="#representing-geographic-data-in-vector-format-6.1" id="toc-representing-geographic-data-in-vector-format-6.1" class="nav-link" data-scroll-target="#representing-geographic-data-in-vector-format-6.1">Representing geographic data in vector format (6.1)</a>
  <ul class="collapse">
  <li><a href="#geo-data-in-vectors-roadmap" id="toc-geo-data-in-vectors-roadmap" class="nav-link" data-scroll-target="#geo-data-in-vectors-roadmap">geo data in vectors: roadmap</a></li>
  <li><a href="#point-creating-geometries" id="toc-point-creating-geometries" class="nav-link" data-scroll-target="#point-creating-geometries"><code>Point</code>: creating geometries</a></li>
  <li><a href="#point-well-known-text-wkt-representation" id="toc-point-well-known-text-wkt-representation" class="nav-link" data-scroll-target="#point-well-known-text-wkt-representation"><code>Point</code>: Well Known Text (WKT) representation</a></li>
  <li><a href="#point-coordinate-representation" id="toc-point-coordinate-representation" class="nav-link" data-scroll-target="#point-coordinate-representation"><code>Point</code>: Coordinate representation</a></li>
  <li><a href="#point-extraction-methods" id="toc-point-extraction-methods" class="nav-link" data-scroll-target="#point-extraction-methods"><code>Point</code>: extraction methods</a></li>
  <li><a href="#linestring-creating-geometries" id="toc-linestring-creating-geometries" class="nav-link" data-scroll-target="#linestring-creating-geometries"><code>LineString</code>: creating geometries</a></li>
  <li><a href="#linestring-creation-syntax" id="toc-linestring-creation-syntax" class="nav-link" data-scroll-target="#linestring-creation-syntax"><code>LineString</code>: creation syntax</a></li>
  <li><a href="#linestring-discussion-questions" id="toc-linestring-discussion-questions" class="nav-link" data-scroll-target="#linestring-discussion-questions"><code>LineString</code> discussion questions</a></li>
  <li><a href="#linestring-coordinate-representation" id="toc-linestring-coordinate-representation" class="nav-link" data-scroll-target="#linestring-coordinate-representation"><code>LineString</code> coordinate representation</a></li>
  <li><a href="#linestring-attributes" id="toc-linestring-attributes" class="nav-link" data-scroll-target="#linestring-attributes"><code>LineString</code> attributes</a></li>
  <li><a href="#polygon-creating-geometries" id="toc-polygon-creating-geometries" class="nav-link" data-scroll-target="#polygon-creating-geometries"><code>Polygon</code>: creating geometries</a></li>
  <li><a href="#polygon-wkt" id="toc-polygon-wkt" class="nav-link" data-scroll-target="#polygon-wkt"><code>Polygon</code>: WKT</a></li>
  <li><a href="#polygon-attributes" id="toc-polygon-attributes" class="nav-link" data-scroll-target="#polygon-attributes"><code>Polygon</code>: attributes</a></li>
  <li><a href="#polygon-example-ii" id="toc-polygon-example-ii" class="nav-link" data-scroll-target="#polygon-example-ii"><code>Polygon</code>: example II</a></li>
  <li><a href="#polygon-example-ii-with-a-hole" id="toc-polygon-example-ii-with-a-hole" class="nav-link" data-scroll-target="#polygon-example-ii-with-a-hole"><code>Polygon</code>: example II with a hole</a></li>
  <li><a href="#do-pair-share" id="toc-do-pair-share" class="nav-link" data-scroll-target="#do-pair-share">Do-pair-Share</a></li>
  <li><a href="#geo-data-in-vectors-summary" id="toc-geo-data-in-vectors-summary" class="nav-link" data-scroll-target="#geo-data-in-vectors-summary">geo data in vectors: summary</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Spatial I</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Peter Ganong and Maggie Shi </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 28, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<!--
 beamer:
    toc: true
    fig-width: 6
    fig-height: 4
    include-in-header: header_pagenrs.tex
include-before-body:
  text: |
    \RecustomVerbatimEnvironment{verbatim}{Verbatim}{
      showspaces = false,
      showtabs = false,
      breaksymbolleft={},
      breaklines
    }
    -->
<section id="introduction-5.2" class="level1">
<h1>Introduction (5.2)</h1>
<section id="intro-roadmap" class="level2">
<h2 class="anchored" data-anchor-id="intro-roadmap">Intro: roadmap</h2>
<ul>
<li>motivation</li>
<li>textbook</li>
<li><code>requirements.txt</code></li>
<li>types of geo data</li>
<li>attribute data</li>
<li>storage for geo data</li>
</ul>
</section>
<section id="motivation" class="level2">
<h2 class="anchored" data-anchor-id="motivation">Motivation</h2>
<ul>
<li>For many datasets, the fundamental unit of observation is geographic
<ul>
<li>a place</li>
<li>a road</li>
<li>a building</li>
<li>a county</li>
</ul></li>
<li>By the end of this section (two classes), you will be able to
<ul>
<li>Represent geographic vector objects in Python using the <code>shapely</code> library</li>
<li>Understand the basic data structures and methods of geopandas GeoDataFrames</li>
<li>Execute common geometric operations with points, lines and polygons</li>
<li>Spatial join operations</li>
</ul></li>
</ul>
</section>
<section id="textbook" class="level2">
<h2 class="anchored" data-anchor-id="textbook">Textbook</h2>
<p><a href="https://pythongis.org">Introduction to Python for Geographic Data Analysis</a> by Henrikki Tenkanen, Vuokko Heikinheimo &amp; David Whipp</p>
<p>Book has three parts:</p>
<ol type="1">
<li>Intro to Python (you know this already)</li>
<li>Intro to Geographical Information Systems (GIS) with Python</li>
<li>Case Studies (this part is actually not written yet)</li>
</ol>
<p>We are going to teach material from Chapters 5 and 6 in Section 2.</p>
</section>
<section id="requirements.txt" class="level2">
<h2 class="anchored" data-anchor-id="requirements.txt"><code>requirements.txt</code></h2>
<p>(We will elaborate more on what this file is in minilesson on Wednesday)</p>
<p><code>shapely</code> – Manipulation and analysis of geometric objects in the Cartesian plane.</p>
<p><code>geopandas</code> – Geometric objects nested within a standard pandas data frame</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shapely</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shapely <span class="im">import</span> Polygon, Point</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="vector-vs-raster-data" class="level2">
<h2 class="anchored" data-anchor-id="vector-vs-raster-data">Vector vs raster data</h2>
<p><img src="pictures/vector_vs_raster.jpg" style="height:80.0%"></p>
<p><strong>Vector</strong> data records points, lines and shapes. <strong>Raster</strong> data records pixels.</p>
<p>Discussion question – brainstorm examples of each type of data.</p>
<!--CC to GGG:  would be good to give a few "real world" examples (from research?) 
Redlining
Carl Kitchens' highway research
Satellite? research 

MS to GGG: relatedly, what are the pro's and con's of each type? Something like: 
vectors can be scaled up or down without losing integrity, but raster allows you to store fine-grained data at the pixel-level (e.g., plotting a continuous measure)
-->
</section>
<section id="examples-of-vector-data" class="level2">
<h2 class="anchored" data-anchor-id="examples-of-vector-data">Examples of vector data</h2>
<p><img src="pictures/vector_data_model.jpg" style="height:100.0%"></p>
</section>
<section id="building-blocks-of-vector-data" class="level2">
<h2 class="anchored" data-anchor-id="building-blocks-of-vector-data">Building blocks of vector data</h2>
<table class="table">
<thead>
<tr class="header">
<th>Data type</th>
<th>Well-known text (WKT)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>Point</code></td>
<td><code>(25 60.5)</code></td>
</tr>
<tr class="even">
<td><code>LineString</code></td>
<td><code>(24.5 61, 25 60.5, 25.5 61)</code></td>
</tr>
<tr class="odd">
<td><code>Polygon</code></td>
<td><code>(24.5 61, 25 60.5, 25.5 61, 24.5 61)</code></td>
</tr>
<tr class="even">
<td><code>MultiPoint</code></td>
<td><code>((25 60.5) (25.5 61))</code></td>
</tr>
<tr class="odd">
<td><code>MultiLineString</code></td>
<td>…</td>
</tr>
<tr class="even">
<td><code>MultiPolygon</code></td>
<td>…</td>
</tr>
</tbody>
</table>
<p><strong>Well-known text</strong> is the version of the data which is easily interpretable to a human</p>
<p>We will discuss how to read these shortly!</p>
</section>
<section id="attribute-data" class="level2">
<h2 class="anchored" data-anchor-id="attribute-data">Attribute data</h2>
<p>In virtually every example, we will associate <strong>attribute</strong> data of the type that might appear in a table with vector data.</p>
<p>Examples of data that would associate with a <em>point</em>:</p>
<ul>
<li>particulate matter (pollution)</li>
<li>temperature</li>
<li>altitude</li>
</ul>
<p>Discussion question: what type of data would you associate with…</p>
<ol type="1">
<li>…a building?</li>
<li>…a geographic area?</li>
</ol>
<!-- ZZZ this is a pretty open-ended brainstorm, but here are a few examples in case people get stuck
1. address 
2. population, GDP-->

<!-- MS to GGG: we should differentiate between attributes that are built-in to each geography type (e.g., centroid and length) as opposed to attributes like the examples listed above that are not related to the geography per se 

Also we should note that we're not covering every possible attribute for each geometry type -- students should read the documentation, which lists all of the possible attributes. https://shapely.readthedocs.io/en/stable/reference/shapely.Point.html#shapely.Point -->
</section>
<section id="intro-summary" class="level2">
<h2 class="anchored" data-anchor-id="intro-summary">Intro: summary</h2>
<ul>
<li>vector data</li>
<li>raster data</li>
<li>attribute data</li>
<li>The spatial lectures here will focus on vector and attribute data because of time limitations.</li>
</ul>
</section>
</section>
<section id="representing-geographic-data-in-vector-format-6.1" class="level1">
<h1>Representing geographic data in vector format (6.1)</h1>
<section id="geo-data-in-vectors-roadmap" class="level2">
<h2 class="anchored" data-anchor-id="geo-data-in-vectors-roadmap">geo data in vectors: roadmap</h2>
<ul>
<li><code>Point</code></li>
<li><code>LineString</code></li>
<li><code>Polygon</code></li>
</ul>
<p>Within each data type, we will cover creation, Well Known Text (WKT), and coordinates.</p>
</section>
<section id="point-creating-geometries" class="level2">
<h2 class="anchored" data-anchor-id="point-creating-geometries"><code>Point</code>: creating geometries</h2>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shapely <span class="im">import</span> Point</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>point <span class="op">=</span> Point(<span class="fl">2.2</span>, <span class="fl">4.2</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>point</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<p><img src="spatial_1_files/figure-html/cell-3-output-1.svg" class="img-fluid"></p>
</div>
</div>
<!-- ZZZ
MS comment: I anticipate students will ask, what do these coordinates meann? ChatGPT says the coordinates depend on a specific coordinate system, but we haven't defined a coordinate system yet. (https://chatgpt.com/share/66eb3cc4-8690-800f-b01f-8153f30dc78b) Without defining a coordinate system, can we say that these coordinates just represent locations relative to some arbitrary point on the screen -->
</section>
<section id="point-well-known-text-wkt-representation" class="level2">
<h2 class="anchored" data-anchor-id="point-well-known-text-wkt-representation"><code>Point</code>: Well Known Text (WKT) representation</h2>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(point) <span class="co">#extracts WKT</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>point.wkt    <span class="co">#gets WKT directly</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>point3D <span class="op">=</span> Point(<span class="fl">9.26</span>, <span class="op">-</span><span class="fl">2.456</span>, <span class="fl">0.57</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(point3D)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>POINT (2.2 4.2)
POINT Z (9.26 -2.456 0.57)</code></pre>
</div>
</div>
<p><code>WKT</code> gives you a plaintext representation of where the point is. It contrasts with Well Known Binary (<code>WKB</code>) which stores geo data in the way which is most efficient for the computer. Wikipedia has some nice <a href="https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry">examples</a> of how the same point is stored by WKT and WKB.</p>
</section>
<section id="point-coordinate-representation" class="level2">
<h2 class="anchored" data-anchor-id="point-coordinate-representation"><code>Point</code>: Coordinate representation</h2>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(point.coords)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>shapely.coords.CoordinateSequence</code></pre>
</div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span>(point.coords)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>[(2.2, 4.2)]</code></pre>
</div>
</div>
</section>
<section id="point-extraction-methods" class="level2">
<h2 class="anchored" data-anchor-id="point-extraction-methods"><code>Point</code>: extraction methods</h2>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(point.x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2.2</code></pre>
</div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(point.xy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(array('d', [2.2]), array('d', [4.2]))</code></pre>
</div>
</div>
</section>
<section id="linestring-creating-geometries" class="level2">
<h2 class="anchored" data-anchor-id="linestring-creating-geometries"><code>LineString</code>: creating geometries</h2>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shapely <span class="im">import</span> Point, LineString</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>point1 <span class="op">=</span> Point(<span class="fl">2.2</span>, <span class="fl">4.2</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>point2 <span class="op">=</span> Point(<span class="fl">7.2</span>, <span class="op">-</span><span class="fl">25.1</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>point3 <span class="op">=</span> Point(<span class="fl">9.26</span>, <span class="op">-</span><span class="fl">2.456</span>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>line <span class="op">=</span> LineString([point1, point2, point3])</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>line_from_tuples <span class="op">=</span> LineString([(<span class="fl">2.2</span>, <span class="fl">4.2</span>), (<span class="fl">7.2</span>, <span class="op">-</span><span class="fl">25.1</span>), (<span class="fl">9.26</span>, <span class="op">-</span><span class="fl">2.456</span>)])</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>line</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<p><img src="spatial_1_files/figure-html/cell-9-output-1.svg" class="img-fluid"></p>
</div>
</div>
</section>
<section id="linestring-creation-syntax" class="level2">
<h2 class="anchored" data-anchor-id="linestring-creation-syntax"><code>LineString</code>: creation syntax</h2>
<p>These two input methods produce the same output. No “right” way. Use whichever way is more convenient in your application.</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>line <span class="op">=</span> LineString([point1, point2, point3])</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>line_from_tuples <span class="op">=</span> LineString([(<span class="fl">2.2</span>, <span class="fl">4.2</span>), (<span class="fl">7.2</span>, <span class="op">-</span><span class="fl">25.1</span>), (<span class="fl">9.26</span>, <span class="op">-</span><span class="fl">2.456</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="linestring-discussion-questions" class="level2">
<h2 class="anchored" data-anchor-id="linestring-discussion-questions"><code>LineString</code> discussion questions</h2>
<ol type="1">
<li>What output should we expect if we run <code>print(line)</code>? Write down your guess on your MUD card before you run it at the computer.</li>
<li>How can you access the Well Known Text representation?</li>
</ol>
<!-- ZZZ 1. LINESTRING (2.2 4.2, 7.2 -25.1, 9.26 -2.456) 2. line.wkt -->
</section>
<section id="linestring-coordinate-representation" class="level2">
<h2 class="anchored" data-anchor-id="linestring-coordinate-representation"><code>LineString</code> coordinate representation</h2>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span>(line.coords)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>[(2.2, 4.2), (7.2, -25.1), (9.26, -2.456)]</code></pre>
</div>
</div>
</section>
<section id="linestring-attributes" class="level2">
<h2 class="anchored" data-anchor-id="linestring-attributes"><code>LineString</code> attributes</h2>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>xcoords <span class="op">=</span> <span class="bu">list</span>(line.xy[<span class="dv">0</span>])</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>ycoords <span class="op">=</span> <span class="bu">list</span>(line.xy[<span class="dv">1</span>])</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(xcoords)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ycoords)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2.2, 7.2, 9.26]
[4.2, -25.1, -2.456]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>length <span class="op">=</span> line.length</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Length of our line: </span><span class="sc">{</span>length<span class="sc">:.2f}</span><span class="ss"> units"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Length of our line: 52.46 units</code></pre>
</div>
</div>
</section>
<section id="polygon-creating-geometries" class="level2">
<h2 class="anchored" data-anchor-id="polygon-creating-geometries"><code>Polygon</code>: creating geometries</h2>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shapely <span class="im">import</span> Polygon</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>poly <span class="op">=</span> Polygon([point1, point2, point3])</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>poly</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<p><img src="spatial_1_files/figure-html/cell-14-output-1.svg" class="img-fluid"></p>
</div>
</div>
</section>
<section id="polygon-wkt" class="level2">
<h2 class="anchored" data-anchor-id="polygon-wkt"><code>Polygon</code>: WKT</h2>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>poly.wkt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>'POLYGON ((2.2 4.2, 7.2 -25.1, 9.26 -2.456, 2.2 4.2))'</code></pre>
</div>
</div>
<p>Note the double parentheses</p>
</section>
<section id="polygon-attributes" class="level2">
<h2 class="anchored" data-anchor-id="polygon-attributes"><code>Polygon</code>: attributes</h2>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Polygon centroid: "</span>, poly.centroid)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Polygon Area: "</span>, poly.area)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Polygon Bounding Box: "</span>, poly.bounds)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Polygon Exterior: "</span>, poly.exterior)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Polygon Exterior Length: "</span>, poly.exterior.length)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Polygon centroid:  POINT (6.22 -7.785333333333334)
Polygon Area:  86.789
Polygon Bounding Box:  (2.2, -25.1, 9.26, 4.2)
Polygon Exterior:  LINEARRING (2.2 4.2, 7.2 -25.1, 9.26 -2.456, 2.2 4.2)
Polygon Exterior Length:  62.16395199996553</code></pre>
</div>
</div>
</section>
<section id="polygon-example-ii" class="level2">
<h2 class="anchored" data-anchor-id="polygon-example-ii"><code>Polygon</code>: example II</h2>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>exterior <span class="op">=</span> [(<span class="op">-</span><span class="dv">180</span>, <span class="dv">90</span>), (<span class="op">-</span><span class="dv">180</span>, <span class="op">-</span><span class="dv">90</span>), (<span class="dv">180</span>, <span class="op">-</span><span class="dv">90</span>), (<span class="dv">180</span>, <span class="dv">90</span>)]</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>poly_without_hole <span class="op">=</span> Polygon(shell<span class="op">=</span>exterior)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>poly_without_hole</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<p><img src="spatial_1_files/figure-html/cell-17-output-1.svg" class="img-fluid"></p>
</div>
</div>
</section>
<section id="polygon-example-ii-with-a-hole" class="level2">
<h2 class="anchored" data-anchor-id="polygon-example-ii-with-a-hole"><code>Polygon</code>: example II with a hole</h2>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the hole coordinates (a single hole in this case)</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>holes_coordinates <span class="op">=</span> [[(<span class="op">-</span><span class="dv">170</span>, <span class="dv">80</span>), (<span class="op">-</span><span class="dv">170</span>, <span class="op">-</span><span class="dv">80</span>), (<span class="dv">170</span>, <span class="op">-</span><span class="dv">80</span>), (<span class="dv">170</span>, <span class="dv">80</span>)]]</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>poly_with_hole <span class="op">=</span> Polygon(shell<span class="op">=</span>exterior, holes<span class="op">=</span>holes_coordinates)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>poly_with_hole</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<p><img src="spatial_1_files/figure-html/cell-18-output-1.svg" class="img-fluid"></p>
</div>
</div>
</section>
<section id="do-pair-share" class="level2">
<h2 class="anchored" data-anchor-id="do-pair-share">Do-pair-Share</h2>
<ol type="1">
<li>Create a triangle</li>
<li>Create a square</li>
<li>Create a circle (hint: look up the <code>buffer</code> method in <code>shapely</code>)</li>
</ol>
</section>
<section id="geo-data-in-vectors-summary" class="level2">
<h2 class="anchored" data-anchor-id="geo-data-in-vectors-summary">geo data in vectors: summary</h2>
<table class="table">
<thead>
<tr class="header">
<th>Data type</th>
<th>Well-known text (WKT)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>Point</code></td>
<td><code>(25 60.5)</code></td>
</tr>
<tr class="even">
<td><code>LineString</code></td>
<td><code>(24.5 61, 25 60.5, 25.5 61)</code></td>
</tr>
<tr class="odd">
<td><code>Polygon</code></td>
<td><code>(24.5 61, 25 60.5, 25.5 61, 24.5 61)</code></td>
</tr>
</tbody>
</table>
<p>Methods</p>
<ul>
<li>any type: <code>.coords</code>, <code>.x</code>, <code>.xy</code></li>
<li><code>LineString</code> or <code>Polygon</code>: <code>.centroid</code>, <code>.length</code></li>
<li><code>Polygon</code>: <code>.bounds</code>, <code>.area</code>, <code>.exterior</code></li>
</ul>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>